

/*
TSR - CAROUSEL LISTING
*/ 


;(function(document,$) {


    window.tsrCommunicationPrimary = window.tsrCommunicationPrimary || {};

/////////////////////////////////////////////////////////////////////////////////////////////////////////
////// TSR - Init
/////////////////////////////////////////////////////////////////////////////////////////////////////////


    tsrCommunicationPrimary.tsrInit = function() {

 
		tsrCommunicationPrimary.tsrMobileTextHeight();
		tsrCommunicationPrimary.tsrPrimaryCarousel();


    };


  
/////////////////////////////////////////////////////////////////////////////////////////////////////////
////// TSR - Equal heights
/////////////////////////////////////////////////////////////////////////////////////////////////////////

	// Thanks Paul Irish
	$.fn.setAllToMaxHeight = function(){
		return this.height( Math.max.apply(this, $.map( this , function(e){ return $(e).height() }) ) );
	}


/////////////////////////////////////////////////////////////////////////////////////////////////////////
////// TSR - Carousel conditions
/////////////////////////////////////////////////////////////////////////////////////////////////////////


    tsrCommunicationPrimary.tsrPrimaryCarousel = function () {


		var bw = $('body').width();

	    $('.tsr-section-communictaion-primary').each(function () {

/////// Variables

		var el 	= $(this);

/////// Init slider

		 el.flexslider({
			animation: "slide",
			namespace: "tsr-",
			selector: ".tsr-slides > a", 
			animationLoop: true,
			slideshow: false, 
			itemMargin: 0,
			controlNav: true,              
			directionNav: true,             
			prevText: "",           
			nextText: "",	        
		});



	    }); // Each END



    }; // Func END

/////////////////////////////////////////////////////////////////////////////////////////////////////////
////// TSR - Mobile text height
/////////////////////////////////////////////////////////////////////////////////////////////////////////


    tsrCommunicationPrimary.tsrMobileTextHeight = function () {


		var bw = $('body').width();



	    $('.tsr-section-communictaion-primary').each(function () {

/////// Variables

			var el 			= $(this);
			var textHeight 	= el.find('.tsr-tactical-textPanel').height();

			

/////////////////////////////////////////////
////// Check widths

			if(bw <= 767 ){
				
				$('.tsr-slides > a', this).each(function () {


					var el 			= $(this);
					var textHeight 	= el.find('.tsr-tactical-textPanel').height();
					console.log(textHeight);

					el.css('margin-bottom', textHeight + 10);

				}); // Each END

			} else {

				$('.tsr-slides > a', this).each(function () {
					
					var el 			= $(this);
					el.css('margin-bottom', '0');

				}); // Each END

			}



	    }); // Each END



    }; // Func END

		



/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////
////// Ready
/////////////////////////////////////////////////////////////////////////////////////////////////////////

    $(document).on('ready', function(){

        tsrCommunicationPrimary.tsrInit();
      
    });


/////////////////////////////////////////////////////////////////////////////////////////////////////////
////// Resize
/////////////////////////////////////////////////////////////////////////////////////////////////////////


	// jquery.debouncing.js, thanks Paul Irish

    $(window).smartresize(function(){
  		tsrCommunicationPrimary.tsrMobileTextHeight();
	});

/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////

})(document,jQuery);

/////////////////////////////////////////////////////////////////////////////////////////////////////////
////// END
/////////////////////////////////////////////////////////////////////////////////////////////////////////

